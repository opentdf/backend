# entitlement-pdp

![Version: 0.0.10](https://img.shields.io/badge/Version-0.0.10-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: main](https://img.shields.io/badge/AppVersion-main-informational?style=flat-square)

An implementation of an ABAC Entity Entitlement Policy Decision Point

## Maintainers

| Name   | Email | Url |
| ------ | ----- | --- |
| OpenTDF | support@opentdf.io | opentdf.io |

## Values

| Key                                     | Type   | Default                                                       | Description                                                                                                                                                                                                                                                                                                                                                 |
| --------------------------------------- | ------ | ------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| config.disableTracing                   | string | `"false"`                                                     | Disable emitting OpenTelemetry traces (avoids junk timeouts if environment has no OT collector)                                                                                                                                                                                                                                                             |
| config.externalHost                     | string | `""`                                                          | External endpoint the server will be accessed from (used for OpenAPI endpoint serving)                                                                                                                                                                                                                                                                      |
| config.listenPort                       | int    | `3355`                                                        | Port the server will listen on                                                                                                                                                                                                                                                                                                                              |
| config.opaConfigPath                    | string | `"/etc/opa/config/opa-config.yaml"`                           | Path to opa config yaml                                                                                                                                                                                                                                                                                                                                     |
| config.otlpCollectorEndpoint            | string | `"opentelemetry-collector.otel.svc:4317"`                     | Open telemetry collector endpoint                                                                                                                                                                                                                                                                                                                           |
| config.verbose                          | string | `"false"`                                                     | Enable verbose logging                                                                                                                                                                                                                                                                                                                                      |
| global.opentdf.common.imagePullSecrets  | list   | `[]`                                                          | JSON passed to the deployment's `template.spec.imagePullSecrets`                                                                                                                                                                                                                                                                                            |
| image.pullPolicy                        | string | `"IfNotPresent"`                                              | The container's `imagePullPolicy`                                                                                                                                                                                                                                                                                                                           |
| image.repo                              | string | `"ghcr.io/opentdf/entitlement-pdp"`                           | The image selector, also called the 'image name' in k8s documentation and 'image repository' in docker's guides.                                                                                                                                                                                                                                            |
| image.tag                               | string | `nil`                                                         | `Chart.AppVersion` will be used for image tag, override here if needed                                                                                                                                                                                                                                                                                      |
| imagePullSecrets                        | string | `nil`                                                         | JSON passed to the deployment's `template.spec.imagePullSecrets`. Overrides `global.opentdf.common.imagePullSecrets` when set                                                                                                                                                                                                                               |
| opaConfig.extraConfigYaml               | object | `{"decision_logs":{"console":true}}`                          | Any extra/additional OPA config defined here will be appended as-is, as raw YAML to the OPA config file generated by the chart.                                                                                                                                                                                                                             |
| opaConfig.policy.OCIRegistryUrl         | string | `"https://ghcr.io"`                                           | Base URL to contact the policy bundle with                                                                                                                                                                                                                                                                                                                  |
| opaConfig.policy.allowInsecureTLS       | bool   | `false`                                                       | This will tell OPA to ignore TLS errors (bad cert, self-signed cert, etc) when downloading an OCI policy bundle from an OCI registry. Unsuitable for production, used for testing with `localhost` registries                                                                                                                                               |
| opaConfig.policy.bundleRepo             | string | `"ghcr.io/opentdf/entitlement-pdp/entitlements-policybundle"` | Resource path to use to download bundle from configured service                                                                                                                                                                                                                                                                                             |
| opaConfig.policy.bundleTag              | string | `nil`                                                         | `bundleTag` will default to `.Chart.AppVersion` if unset                                                                                                                                                                                                                                                                                                    |
| opaConfig.policy.updatePolling.maxDelay | int    | `120`                                                         | Maximum amount of time to wait between bundle downloads                                                                                                                                                                                                                                                                                                     |
| opaConfig.policy.updatePolling.minDelay | int    | `60`                                                          | Minimum amount of time to wait between bundle downloads                                                                                                                                                                                                                                                                                                     |
| opaConfig.policy.useStaticPolicy        | bool   | `false`                                                       | If `useStaticPolicy` is set to `true`, then an OPA config will be generated that forces the use of a policy bundle that was built and packed into the `entitlement-pdp` container at _build_ time, and no policy bundle will be fetched dynamically from the registry on startup. This is not a desirable default, but it is useful in offline deployments. |
| opaConfigMountPath                      | string | `"/etc/opa/config"`                                           | Where the opa config yaml is mounted                                                                                                                                                                                                                                                                                                                        |
| replicaCount                            | int    | `3`                                                           | Sets the default number of pod replicas in the deployment. Ignored if `autoscaling.enabled` == true                                                                                                                                                                                                                                                         |
| secret.opaPolicyPullSecret              | string | `"YOUR_GHCR_PAT_HERE"`                                        | Creds or token needed to pull OPA policy bundle                                                                                                                                                                                                                                                                                                             |
| secretRef                               | string | `nil`                                                         | Additional secrets. You can also add opa                                                                                                                                                                                                                                                                                                                    |
| serviceAccount.annotations              | object | `{}`                                                          | Annotations to add to the service account                                                                                                                                                                                                                                                                                                                   |
| serviceAccount.create                   | bool   | `true`                                                        | Specifies whether a service account should be created                                                                                                                                                                                                                                                                                                       |
| serviceAccount.name                     | string | `""`                                                          | The name of the service account to use. If not set and create is true, a name is generated using the fullname template                                                                                                                                                                                                                                      |

---

Autogenerated from chart metadata using [helm-docs v1.11.0](https://github.com/norwoodj/helm-docs/releases/v1.11.0)
